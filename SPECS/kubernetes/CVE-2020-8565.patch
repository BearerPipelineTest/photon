From 27f5d24017078154d39ccd258bd83562c911fed8 Mon Sep 17 00:00:00 2001
From: Sam Fowler <sfowler@redhat.com>
Date: Tue, 6 Oct 2020 11:10:38 +1000
Subject: [PATCH] Mask bearer token in logs when logLevel >= 9

---
 staging/src/k8s.io/client-go/transport/round_trippers.go | 1 +
 1 file changed, 1 insertion(+)

diff --git a/staging/src/k8s.io/client-go/transport/round_trippers.go b/staging/src/k8s.io/client-go/transport/round_trippers.go
index a272753ae2dbf..abfb7ad6cbdd3 100644
--- a/staging/src/k8s.io/client-go/transport/round_trippers.go
+++ b/staging/src/k8s.io/client-go/transport/round_trippers.go
@@ -340,6 +340,7 @@ func (r *requestInfo) toCurl() string {
 	headers := ""
 	for key, values := range r.RequestHeaders {
 		for _, value := range values {
+			value = maskValue(key, value)
 			headers += fmt.Sprintf(` -H %q`, fmt.Sprintf("%s: %s", key, value))
 		}
 	}
