From 02b77861ec00ca93fa906d8f2d1f7529e5a9abb9 Mon Sep 17 00:00:00 2001
From: Tim Hockin <thockin@google.com>
Date: Fri, 18 Dec 2020 13:33:43 -0800
Subject: [PATCH] Move defaultingressclass admission to net subdir

---
 pkg/kubeapiserver/options/BUILD                                 | 2 +-
 pkg/kubeapiserver/options/plugins.go                            | 2 +-
 plugin/BUILD                                                    | 2 +-
 plugin/pkg/admission/{ => network}/defaultingressclass/BUILD    | 2 +-
 .../admission/{ => network}/defaultingressclass/admission.go    | 0
 .../{ => network}/defaultingressclass/admission_test.go         | 0
 6 files changed, 4 insertions(+), 4 deletions(-)
 rename plugin/pkg/admission/{ => network}/defaultingressclass/BUILD (95%)
 rename plugin/pkg/admission/{ => network}/defaultingressclass/admission.go (100%)
 rename plugin/pkg/admission/{ => network}/defaultingressclass/admission_test.go (100%)

diff --git a/pkg/kubeapiserver/options/BUILD b/pkg/kubeapiserver/options/BUILD
index 5c9e9ba6fd8a3..e473d84a75704 100644
--- a/pkg/kubeapiserver/options/BUILD
+++ b/pkg/kubeapiserver/options/BUILD
@@ -25,7 +25,6 @@ go_library(
         "//plugin/pkg/admission/certificates/approval:go_default_library",
         "//plugin/pkg/admission/certificates/signing:go_default_library",
         "//plugin/pkg/admission/certificates/subjectrestriction:go_default_library",
-        "//plugin/pkg/admission/defaultingressclass:go_default_library",
         "//plugin/pkg/admission/defaulttolerationseconds:go_default_library",
         "//plugin/pkg/admission/deny:go_default_library",
         "//plugin/pkg/admission/eventratelimit:go_default_library",
@@ -36,6 +35,7 @@ go_library(
         "//plugin/pkg/admission/limitranger:go_default_library",
         "//plugin/pkg/admission/namespace/autoprovision:go_default_library",
         "//plugin/pkg/admission/namespace/exists:go_default_library",
+        "//plugin/pkg/admission/network/defaultingressclass:go_default_library",
         "//plugin/pkg/admission/noderestriction:go_default_library",
         "//plugin/pkg/admission/nodetaint:go_default_library",
         "//plugin/pkg/admission/podnodeselector:go_default_library",
diff --git a/pkg/kubeapiserver/options/plugins.go b/pkg/kubeapiserver/options/plugins.go
index 351a8ef8d005d..8b6f33a6da0f3 100644
--- a/pkg/kubeapiserver/options/plugins.go
+++ b/pkg/kubeapiserver/options/plugins.go
@@ -27,7 +27,6 @@ import (
 	certapproval "k8s.io/kubernetes/plugin/pkg/admission/certificates/approval"
 	certsigning "k8s.io/kubernetes/plugin/pkg/admission/certificates/signing"
 	certsubjectrestriction "k8s.io/kubernetes/plugin/pkg/admission/certificates/subjectrestriction"
-	"k8s.io/kubernetes/plugin/pkg/admission/defaultingressclass"
 	"k8s.io/kubernetes/plugin/pkg/admission/defaulttolerationseconds"
 	"k8s.io/kubernetes/plugin/pkg/admission/deny"
 	"k8s.io/kubernetes/plugin/pkg/admission/eventratelimit"
@@ -38,6 +37,7 @@ import (
 	"k8s.io/kubernetes/plugin/pkg/admission/limitranger"
 	"k8s.io/kubernetes/plugin/pkg/admission/namespace/autoprovision"
 	"k8s.io/kubernetes/plugin/pkg/admission/namespace/exists"
+	"k8s.io/kubernetes/plugin/pkg/admission/network/defaultingressclass"
 	"k8s.io/kubernetes/plugin/pkg/admission/noderestriction"
 	"k8s.io/kubernetes/plugin/pkg/admission/nodetaint"
 	"k8s.io/kubernetes/plugin/pkg/admission/podnodeselector"
diff --git a/plugin/BUILD b/plugin/BUILD
index 26f5245a1078f..23ebfa6f8bda6 100644
--- a/plugin/BUILD
+++ b/plugin/BUILD
@@ -15,7 +15,6 @@ filegroup(
         "//plugin/pkg/admission/alwayspullimages:all-srcs",
         "//plugin/pkg/admission/antiaffinity:all-srcs",
         "//plugin/pkg/admission/certificates:all-srcs",
-        "//plugin/pkg/admission/defaultingressclass:all-srcs",
         "//plugin/pkg/admission/defaulttolerationseconds:all-srcs",
         "//plugin/pkg/admission/deny:all-srcs",
         "//plugin/pkg/admission/eventratelimit:all-srcs",
@@ -26,6 +25,7 @@ filegroup(
         "//plugin/pkg/admission/limitranger:all-srcs",
         "//plugin/pkg/admission/namespace/autoprovision:all-srcs",
         "//plugin/pkg/admission/namespace/exists:all-srcs",
+        "//plugin/pkg/admission/network/defaultingressclass:all-srcs",
         "//plugin/pkg/admission/noderestriction:all-srcs",
         "//plugin/pkg/admission/nodetaint:all-srcs",
         "//plugin/pkg/admission/podnodeselector:all-srcs",
diff --git a/plugin/pkg/admission/defaultingressclass/BUILD b/plugin/pkg/admission/network/defaultingressclass/BUILD
similarity index 95%
rename from plugin/pkg/admission/defaultingressclass/BUILD
rename to plugin/pkg/admission/network/defaultingressclass/BUILD
index 367c3cf3b3d30..e11d7f292e0cc 100644
--- a/plugin/pkg/admission/defaultingressclass/BUILD
+++ b/plugin/pkg/admission/network/defaultingressclass/BUILD
@@ -3,7 +3,7 @@ load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")
 go_library(
     name = "go_default_library",
     srcs = ["admission.go"],
-    importpath = "k8s.io/kubernetes/plugin/pkg/admission/defaultingressclass",
+    importpath = "k8s.io/kubernetes/plugin/pkg/admission/network/defaultingressclass",
     visibility = ["//visibility:public"],
     deps = [
         "//pkg/apis/networking:go_default_library",
diff --git a/plugin/pkg/admission/defaultingressclass/admission.go b/plugin/pkg/admission/network/defaultingressclass/admission.go
similarity index 100%
rename from plugin/pkg/admission/defaultingressclass/admission.go
rename to plugin/pkg/admission/network/defaultingressclass/admission.go
diff --git a/plugin/pkg/admission/defaultingressclass/admission_test.go b/plugin/pkg/admission/network/defaultingressclass/admission_test.go
similarity index 100%
rename from plugin/pkg/admission/defaultingressclass/admission_test.go
rename to plugin/pkg/admission/network/defaultingressclass/admission_test.go
