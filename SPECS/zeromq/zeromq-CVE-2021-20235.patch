From 11db6db00dd7f0c3ec9a0d1cc52623b06d463e68 Mon Sep 17 00:00:00 2001
From: Satya Naga Rajesh <svasamsetty@vmware.com>
Date: Fri, 16 Apr 2021 16:28:58 +0530
Subject: [PATCH] ZMTP v1 static allocator is needlessly resized

Formatted patch:
https://github.com/zeromq/libzmq/commit/397ac80850bf8d010fae23dd215db0ee2c677306

---
 src/decoder_allocators.hpp | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/src/decoder_allocators.hpp b/src/decoder_allocators.hpp
index 30cfaf1..59c3724 100644
--- a/src/decoder_allocators.hpp
+++ b/src/decoder_allocators.hpp
@@ -34,6 +34,7 @@
 #include <cstdlib>
 
 #include "atomic_counter.hpp"
+#include "macros.hpp"
 #include "msg.hpp"
 #include "err.hpp"
 
@@ -69,9 +70,10 @@ namespace zmq
             return bufsize;
         }
 
+	// This buffer is fixed, size must not be changed
         void resize (std::size_t new_size)
         {
-            bufsize = new_size;
+            LIBZMQ_UNUSED (new_size);
         }
     private:
         std::size_t bufsize;
-- 
2.17.1

